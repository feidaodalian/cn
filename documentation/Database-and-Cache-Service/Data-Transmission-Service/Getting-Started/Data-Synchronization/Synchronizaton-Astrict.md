# 预检查与限制说明

使用数据同步服务时，请注意有以下限制条件。

## 数据同步

### 预检查说明

| 检查项                  | 检查内容                                                     |
| ----------------------- | ------------------------------------------------------------ |
| 目标库连通性检查        | 检查目标库是否可连通                                         |
| 目标库Schema、Table检查 | 检查目标库是否存在与待迁移数据同名的Schema、Table<br />全量+增量同步时，应不存在待同步的Schema和Table<br />仅增量同步时，应已存在待同步的Schema和Table |
| 源库binlog_format检查   | 检查源库binlog_format是ROW                                   |
| 源库binlog开启检查      | 检查源库是否开启binlog                                       |
| 源库binlogRowImage检查  | 检查源库binlog_row_image是FULL                               |
| 源库连通性检查          | 检查源库是否可连通                                           |
| 源库权限检查            | 检查源库账号是否满足迁移要求                                 |
| 源库Schema存在性检查    | 检查源库是否存在待迁移Schema                                 |
| 源库server_id检查       | 检查源库server_id是否大于1                                   |
| 源库Table存在性检查     | 检查源库是否存在待迁移Table                                  |
| 源库Table外键检查       | 检查源库Table是否存在外键，需无外键才可迁移                  |
| 数据库版本检查          | 检查源库与目标库数据库版本是否符合迁移要求                   |

### 限制说明

#### 同步类型

- 全量同步（不包含存储过程、函数、Event）
- 全量同步+增量同步

#### 支持的字符集

- utf8
- utf8mb4
- ascii
- binary
- latin1

#### DDL 限制

- DROP 语句不同步

#### 支持的存储引擎

- InnoDB
- Myisam

#### 不支持外键约束

## 灾备同步

### 预检查说明

| 检查项                     | 检查内容                                       |
| -------------------------- | ---------------------------------------------- |
| 云数据库状态检查           | 检查源库与目标库数据库状态是否符合迁移要求     |
| 云数据库同步任务存在性检查 | 检查源库与目标库数据库是否已经存在灾备同步任务 |
| 云数据库类型检查           | 检查源库与目标库数据库类型是否符合迁移要求     |
| 目标库连通性检查           | 检查目标库是否可连通                           |
| 源库连通性检查             | 检查源库是否可连通                             |
| 数据库版本检查             | 检查源库与目标库数据库版本是否符合迁移要求     |

### 限制说明

- 源库需为云数据库主备实例。
- 目标库需为云数据库灾备实例。
- 源库与目标库数据版本需一致。