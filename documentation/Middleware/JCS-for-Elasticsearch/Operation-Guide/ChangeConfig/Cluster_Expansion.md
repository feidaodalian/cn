# 升配集群

随着业务的发展，您可能对集群的配置要求越来越高。当集群的配置无法满足您的业务要求时，可以通过集群升配功能，升级集群配置。
本文介绍了京东云搜索 Elasticsearch 集群升级配置的相关说明、注意事项和操作方法。

## 前提条件
- 集群为正常状态（绿色）。
- 完成集群规格容量评估。 评估方法，请参见 [规格容量评估](../../Best-Practices/Capacity-Assessment.md)。
- 检查集群中是否存在 **状态为 close 的索引**。如果存在，需要将 **对应索引的状态暂时设置为Open，否则变更不成功**。
  - 登录 Kibana 控制台，执行以下命令，查看索引状态。

  ```
  GET /_cat/indices?v
  ```
  </br>
  
  - 登录 Kibana 控制台，执行以下命令，查看索引状态。<index_name>需要替换为状态为close的索引名称。
  ```
  POST /<index_name>/_open
  ```
  </br>
  
## 注意事项

### 服务影响
- 升配集群会触发集群重启，重启时间与集群规格、数据结构和大小等因素有关，建议在业务低峰期操作。一般情况下，重启耗时较长，在小时级别。
- 如果集群为非正常状态（黄色或红色），请待集群恢复正常状态（绿色）再升配集群。

### 计费变化
提交了升配订单后，集群将按照更新后的订单计费。计费规则，请参见 [计费规则](../../Pricing/Billing-Rules.md)。
> 说明：在升配集群时，您可以在变配页面，实时观察更新后的订单消费金额。

### 规格升配
- 每次只能变更一种节点类型（数据节点、冷数据节点、专有主节点、协调节点）的规格配置。
